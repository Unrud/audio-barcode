(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[,function(e,t,n){"use strict";n.r(t);var r=n(2);r.i();const o=r.a.get_beep_time(),c=r.a.get_attack_time(),i=r.a.get_release_time(),u=r.a.get_time_between_packets(),a=r.a.get_payload_len(),l=r.a.get_symbol_mnemonics(),s=r.a.get_max_message_len();let d=document.querySelector("#message-btn"),f=document.querySelector("#message-form"),m=f.querySelector("#message-form input"),p=f.querySelector("#message-form button"),g=document.querySelector("#packet-btn"),h=document.querySelector("#packet-form"),b=h.querySelector("#packet-form input"),y=h.querySelector("#packet-form button"),w=document.querySelector("#log");function _(e,t){let n=document.createElement("p");for(let e of t)n.classList.add(e);n.textContent=e,w.prepend(n)}function v(e,t){let n="";for(let t=0;t<e.length;t++)n+=l.charAt(e[t]);_(n,["packet",t])}function x(e,t){_(e,["message",t])}d.addEventListener("click",(function(e){e.preventDefault(),document.documentElement.classList.add("message"),document.documentElement.classList.remove("packet")})),g.addEventListener("click",(function(e){e.preventDefault(),document.documentElement.classList.remove("message"),document.documentElement.classList.add("packet")}));let A=new(window.AudioContext||window.webkitAudioContext);let k=[],E=!1;let T=r.a.new(A.sampleRate,(function(e){v(e,"rx")}),(function(e){x((new TextDecoder).decode(new Uint8Array(e)),"rx")}),(function e(t){if(t&&k.push(t),E)return;if(!(t=k.shift()))return p.removeAttribute("disabled"),void y.removeAttribute("disabled");E=!0,p.setAttribute("disabled",""),y.setAttribute("disabled","");let n=A.createOscillator(),r=A.createGain();n.connect(r),r.connect(A.destination),n.type="sine";let a=A.currentTime;r.gain.setValueAtTime(0,a);for(let e=0;e<t.length;e++){let u=a+o*e;r.gain.linearRampToValueAtTime(.5,u+c),r.gain.setValueAtTime(.5,u+o-i),r.gain.linearRampToValueAtTime(0,u+o),n.frequency.setValueAtTime(t[e],u)}n.start(a),n.stop(a+o*t.length+u),n.onended=function(){E=!1,e()}}));function S(e){console.log("The following gUM error occured: "+e),_("Microphone access denied: Unable to receive",["err"])}function C(){let e=m.value,t=(new TextEncoder).encode(e);t.length>s?m.setCustomValidity("Message too long: "+t.length):m.setCustomValidity("")}function q(){let e=b.value;for(let t of e)if(-1==l.indexOf(t))return void b.setCustomValidity("Allowed symbols: "+l);b.setCustomValidity("")}navigator.mediaDevices?navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,autoGainControl:!1,noiseSuppression:!1,channelCount:1}}).then((function(e){let t=A.createMediaStreamSource(e),n=A.createScriptProcessor(0,1,1);t.connect(n),n.connect(A.destination),A.resume().catch(S);let r=document.createElement("p");r.textContent="Performance: ";let o=document.createTextNode("â€¦");r.append(o),w.prepend(r);let c=performance.now(),i=0;n.onaudioprocess=function(e){let t=e.inputBuffer,n=t.getChannelData(0);for(let e=0;e<t.length;e++)T.push_sample(E?0:n[e]);i+=t.length;let u=performance.now()-c;if(u>=2e3){let e=i/(t.sampleRate*u/1e3);c+=u,i=0,o.textContent=Math.round(100*e)+"%",e<.98?r.classList.add("err"):r.classList.remove("err")}}})).catch(S):S("Not supported on your browser!"),f.addEventListener("submit",(function(e){e.preventDefault();let t=m.value,n=(new TextEncoder).encode(t);T.send_message(n),x(t,"tx")})),m.setAttribute("maxlength",s),C(),m.addEventListener("input",C),h.addEventListener("submit",(function(e){e.preventDefault();let t=b.value,n=new Uint8Array(a);for(let e=0,r=0;e<t.length&&r<n.length;e++){let o=l.indexOf(t[e]);-1!==o&&(n[r]=o,r++)}T.send(n),v(n,"tx")})),b.setAttribute("maxlength",a),q(),b.addEventListener("input",q)},function(e,t,n){"use strict";(function(e){n.d(t,"i",(function(){return y})),n.d(t,"a",(function(){return _})),n.d(t,"g",(function(){return v})),n.d(t,"c",(function(){return x})),n.d(t,"f",(function(){return A})),n.d(t,"d",(function(){return k})),n.d(t,"b",(function(){return E})),n.d(t,"e",(function(){return S})),n.d(t,"h",(function(){return C}));var r=n(4);const o=new Array(32).fill(void 0);function c(e){return o[e]}o.push(void 0,null,!0,!1);let i=o.length;function u(e){const t=c(e);return function(e){e<36||(o[e]=i,i=e)}(e),t}function a(e){i===o.length&&o.push(o.length+1);const t=i;return i=o[t],o[t]=e,t}let l=0,s=null;function d(){return null!==s&&s.buffer===r.g.buffer||(s=new Uint8Array(r.g.buffer)),s}let f=new("undefined"==typeof TextEncoder?(0,e.require)("util").TextEncoder:TextEncoder)("utf-8");const m="function"==typeof f.encodeInto?function(e,t){return f.encodeInto(e,t)}:function(e,t){const n=f.encode(e);return t.set(n),{read:e.length,written:n.length}};let p=null;function g(){return null!==p&&p.buffer===r.g.buffer||(p=new Int32Array(r.g.buffer)),p}let h=new("undefined"==typeof TextDecoder?(0,e.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});function b(e,t){return h.decode(d().subarray(e,e+t))}function y(){r.f()}function w(e,t){const n=t(1*e.length);return d().set(e,n/1),l=e.length,n}h.decode();class _{static __wrap(e){const t=Object.create(_.prototype);return t.ptr=e,t}free(){const e=this.ptr;this.ptr=0,r.a(e)}static new(e,t,n,o){var c=r.n(e,a(t),a(n),a(o));return _.__wrap(c)}send(e){var t=w(e,r.d),n=l;r.p(this.ptr,t,n)}send_message(e){var t=w(e,r.d),n=l;r.q(this.ptr,t,n)}push_sample(e){r.o(this.ptr,e)}static get_payload_len(){return r.k()>>>0}static get_beep_time(){return r.i()}static get_attack_time(){return r.h()}static get_release_time(){return r.h()}static get_time_between_packets(){return r.m()}static get_symbol_mnemonics(){try{r.l(8);var e=g()[2],t=g()[3];return b(e,t)}finally{r.c(e,t)}}static get_max_message_len(){return r.j()>>>0}}const v=function(e){u(e)},x=function(){return a(new Array)},A=function(e){return a(e)},k=function(e,t){return c(e).push(c(t))},E=(T=function(e,t,n){return a(c(e).call(c(t),c(n)))},function(){try{return T.apply(this,arguments)}catch(e){r.b(a(e))}});var T;const S=function(e,t){var n=function(e,t,n){if(void 0===n){const n=f.encode(e),r=t(n.length);return d().subarray(r,r+n.length).set(n),l=n.length,r}let r=e.length,o=t(r);const c=d();let i=0;for(;i<r;i++){const t=e.charCodeAt(i);if(t>127)break;c[o+i]=t}if(i!==r){0!==i&&(e=e.slice(i)),o=n(o,r,r=i+3*e.length);const t=d().subarray(o+i,o+r);i+=m(e,t).written}return l=i,o}(function e(t){const n=typeof t;if("number"==n||"boolean"==n||null==t)return""+t;if("string"==n)return`"${t}"`;if("symbol"==n){const e=t.description;return null==e?"Symbol":`Symbol(${e})`}if("function"==n){const e=t.name;return"string"==typeof e&&e.length>0?`Function(${e})`:"Function"}if(Array.isArray(t)){const n=t.length;let r="[";n>0&&(r+=e(t[0]));for(let o=1;o<n;o++)r+=", "+e(t[o]);return r+="]",r}const r=/\[object ([^\]]+)\]/.exec(toString.call(t));let o;if(!(r.length>1))return toString.call(t);if(o=r[1],"Object"==o)try{return"Object("+JSON.stringify(t)+")"}catch(e){return"Object"}return t instanceof Error?`${t.name}: ${t.message}\n${t.stack}`:o}(c(t)),r.d,r.e),o=l;g()[e/4+1]=o,g()[e/4+0]=n},C=function(e,t){throw new Error(b(e,t))}}).call(this,n(3)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";var r=n.w[e.i];e.exports=r;n(2);r.r()}]]);