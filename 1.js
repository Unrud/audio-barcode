(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[,function(e,t,n){"use strict";n.r(t);var r=n(2);r.i();const o=r.a.get_beep_time(),c=r.a.get_attack_time(),i=r.a.get_release_time(),u=r.a.get_time_between_packets(),a=r.a.get_payload_len(),s=r.a.get_symbol_mnemonics(),l=r.a.get_max_message_len();let d=document.querySelector("#message-btn"),f=document.querySelector("#message-form"),m=f.querySelector("#message-form input"),g=f.querySelector("#message-form button"),p=document.querySelector("#packet-btn"),h=document.querySelector("#packet-form"),b=h.querySelector("#packet-form input"),y=h.querySelector("#packet-form button"),_=document.querySelector("#log");function w(e,t){let n=document.createElement("p");for(let e of t)n.classList.add(e);n.textContent=e,_.prepend(n)}function v(e,t){let n="";for(let t=0;t<e.length;t++)n+=s.charAt(e[t]);w(n,["packet",t])}function A(e,t){w(e,["message",t])}d.addEventListener("click",(function(e){e.preventDefault(),document.documentElement.classList.add("message"),document.documentElement.classList.remove("packet")})),p.addEventListener("click",(function(e){e.preventDefault(),document.documentElement.classList.remove("message"),document.documentElement.classList.add("packet")}));let x=new(window.AudioContext||window.webkitAudioContext);let k=[],S=!1;let E=r.a.new(x.sampleRate,(function(e){v(e,"rx")}),(function(e){A((new TextDecoder).decode(new Uint8Array(e)),"rx")}),(function e(t){if(t&&k.push(t),S)return;if(!(t=k.shift()))return g.removeAttribute("disabled"),void y.removeAttribute("disabled");S=!0,g.setAttribute("disabled",""),y.setAttribute("disabled","");let n=x.createOscillator(),r=x.createGain();n.connect(r),r.connect(x.destination),n.type="sine";let a=x.currentTime;r.gain.setValueAtTime(0,a);for(let e=0;e<t.length;e++){let u=a+o*e;r.gain.linearRampToValueAtTime(.5,u+c),r.gain.setValueAtTime(.5,u+o-i),r.gain.linearRampToValueAtTime(0,u+o),n.frequency.setValueAtTime(t[e],u)}n.start(a),n.stop(a+o*t.length+u),n.onended=function(){S=!1,e()}}));function T(e){console.log("The following gUM error occured: "+e),w("Microphone access denied: Unable to receive",["err"])}function C(){let e=m.value,t=(new TextEncoder).encode(e);t.length>l?m.setCustomValidity("Message too long: "+t.length):m.setCustomValidity("")}function L(){let e=b.value;for(let t of e)if(-1==s.indexOf(t))return void b.setCustomValidity("Allowed symbols: "+s);b.setCustomValidity("")}navigator.mediaDevices?navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,autoGainControl:!1,noiseSuppression:!1,channelCount:1}}).then((function(e){let t=x.createMediaStreamSource(e),n=x.createScriptProcessor(0,1,1);t.connect(n),n.connect(x.destination),x.resume().catch(T);let r=document.createElement("p");r.textContent="Performance: ";let o=document.createTextNode("â€¦");r.append(o),_.prepend(r);let c=performance.now(),i=0;n.onaudioprocess=function(e){let t=e.inputBuffer,n=t.getChannelData(0);for(let e=0;e<t.length;e++)E.push_sample(S?0:n[e]);i+=t.length;let u=performance.now()-c;if(u>=2e3){let e=i/(t.sampleRate*u/1e3);c+=u,i=0,o.textContent=Math.round(100*e)+"%",e<.98?r.classList.add("err"):r.classList.remove("err")}}})).catch(T):T("Not supported on your browser!"),f.addEventListener("submit",(function(e){e.preventDefault();let t=m.value,n=(new TextEncoder).encode(t);E.send_message(n),A(t,"tx")})),m.setAttribute("maxlength",l),C(),m.addEventListener("input",C),h.addEventListener("submit",(function(e){e.preventDefault();let t=b.value,n=new Uint8Array(a);for(let e=0,r=0;e<t.length&&r<n.length;e++){let o=s.indexOf(t[e]);-1!==o&&(n[r]=o,r++)}E.send(n),v(n,"tx")})),b.setAttribute("maxlength",a),L(),b.addEventListener("input",L)},function(e,t,n){"use strict";n.d(t,"i",(function(){return y})),n.d(t,"a",(function(){return w})),n.d(t,"g",(function(){return v})),n.d(t,"c",(function(){return A})),n.d(t,"f",(function(){return x})),n.d(t,"d",(function(){return k})),n.d(t,"b",(function(){return S})),n.d(t,"e",(function(){return E})),n.d(t,"h",(function(){return T}));var r=n(3);const o=new Array(32);function c(e){return o[e]}o.fill(void 0),o.push(void 0,null,!0,!1);let i=o.length;function u(e){const t=c(e);return function(e){e<36||(o[e]=i,i=e)}(e),t}function a(e){i===o.length&&o.push(o.length+1);const t=i;return i=o[t],o[t]=e,t}let s=0,l=null;function d(){return null!==l&&l.buffer===r.g.buffer||(l=new Uint8Array(r.g.buffer)),l}let f=new TextEncoder("utf-8");const m="function"==typeof f.encodeInto?function(e,t){return f.encodeInto(e,t)}:function(e,t){const n=f.encode(e);return t.set(n),{read:e.length,written:n.length}};let g=null;function p(){return null!==g&&g.buffer===r.g.buffer||(g=new Int32Array(r.g.buffer)),g}let h=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});function b(e,t){return h.decode(d().subarray(e,e+t))}function y(){r.f()}function _(e,t){const n=t(1*e.length);return d().set(e,n/1),s=e.length,n}h.decode();class w{static __wrap(e){const t=Object.create(w.prototype);return t.ptr=e,t}free(){const e=this.ptr;this.ptr=0,r.a(e)}static new(e,t,n,o){var c=r.n(e,a(t),a(n),a(o));return w.__wrap(c)}send(e){var t=_(e,r.d),n=s;r.p(this.ptr,t,n)}send_message(e){var t=_(e,r.d),n=s;r.q(this.ptr,t,n)}push_sample(e){r.o(this.ptr,e)}static get_payload_len(){return r.k()>>>0}static get_beep_time(){return r.i()}static get_attack_time(){return r.h()}static get_release_time(){return r.h()}static get_time_between_packets(){return r.m()}static get_symbol_mnemonics(){try{r.l(8);var e=p()[2],t=p()[3];return b(e,t)}finally{r.c(e,t)}}static get_max_message_len(){return r.j()>>>0}}const v=function(e){u(e)},A=function(){return a(new Array)},x=function(e){return a(e)},k=function(e,t){return c(e).push(c(t))},S=function(e,t,n){try{return a(c(e).call(c(t),c(n)))}catch(e){!function(e){r.b(a(e))}(e)}},E=function(e,t){var n=function(e,t,n){if(void 0===n){const n=f.encode(e),r=t(n.length);return d().subarray(r,r+n.length).set(n),s=n.length,r}let r=e.length,o=t(r);const c=d();let i=0;for(;i<r;i++){const t=e.charCodeAt(i);if(t>127)break;c[o+i]=t}if(i!==r){0!==i&&(e=e.slice(i)),o=n(o,r,r=i+3*e.length);const t=d().subarray(o+i,o+r);i+=m(e,t).written}return s=i,o}(function e(t){const n=typeof t;if("number"==n||"boolean"==n||null==t)return`${t}`;if("string"==n)return`"${t}"`;if("symbol"==n){const e=t.description;return null==e?"Symbol":`Symbol(${e})`}if("function"==n){const e=t.name;return"string"==typeof e&&e.length>0?`Function(${e})`:"Function"}if(Array.isArray(t)){const n=t.length;let r="[";n>0&&(r+=e(t[0]));for(let o=1;o<n;o++)r+=", "+e(t[o]);return r+="]",r}const r=/\[object ([^\]]+)\]/.exec(toString.call(t));let o;if(!(r.length>1))return toString.call(t);if(o=r[1],"Object"==o)try{return"Object("+JSON.stringify(t)+")"}catch(e){return"Object"}return t instanceof Error?`${t.name}: ${t.message}\n${t.stack}`:o}(c(t)),r.d,r.e),o=s;p()[e/4+1]=o,p()[e/4+0]=n},T=function(e,t){throw new Error(b(e,t))}},function(e,t,n){"use strict";var r=n.w[e.i];e.exports=r;n(2);r.r()}]]);