(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[,function(e,t,n){"use strict";n.r(t);var r=n(2);r.i();const o=.5,c=r.a.get_beep_len(),i=r.a.get_attack_len(),u=r.a.get_release_len(),l=r.a.get_payload_len(),a=r.a.get_symbol_mnemonics();let s=document.querySelector("form"),f=s.querySelector("#message"),d=s.querySelector("button[type=submit]"),g=document.querySelector("#log");function p(e,t){let n=document.createElement("div");n.classList.add(t),n.textContent=e,g.prepend(n)}function h(e,t){let n="";for(let t=0;t<e.length;t++)n+=a.charAt(e[t]);p(n,t)}let m=new AudioContext,b=0;let y=r.a.new(m.sampleRate,function(e){h(e,"rx")},function(e){let t=m.createOscillator(),n=m.createGain();t.connect(n),n.connect(m.destination),t.type="sine";let r=m.currentTime;n.gain.setValueAtTime(0,r);for(let l=0;l<e.length;l++){let a=r+c*l;n.gain.linearRampToValueAtTime(o,a+i),n.gain.setValueAtTime(o,a+c-u),n.gain.linearRampToValueAtTime(0,a+c),t.frequency.setValueAtTime(e[l],a)}t.start(r),t.stop(r+c*e.length),d.setAttribute("disabled",""),t.onended=function(){d.removeAttribute("disabled")},b=c*e.length*m.sampleRate});function w(e){console.log("The following gUM error occured: "+e),p("Microphone access denied: Unable to receive messages","err")}function _(){let e=f.value;for(let t=0;t<e.length;t++)if(-1==a.indexOf(e[t]))return void f.setCustomValidity("Allowed symbols: "+a);f.setCustomValidity("")}navigator.mediaDevices?navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,autoGainControl:!1,noiseSuppression:!1,channelCount:1}}).then(function(e){let t=m.createMediaStreamSource(e),n=m.createScriptProcessor(0,1,1);t.connect(n),n.connect(m.destination),m.resume().catch(w);let r=document.createElement("div");r.textContent="Performance: ";let o=document.createTextNode("...");r.append(o),g.prepend(r);let c=performance.now(),i=0;n.onaudioprocess=function(e){let t=e.inputBuffer,n=t.getChannelData(0);for(let e=0;e<t.length;e++)b-=1,y.push_sample(b<0?n[e]:0);i+=t.length;let u=performance.now()-c;if(u>=2e3){let e=i/(t.sampleRate*u/1e3);c+=u,i=0,o.textContent=Math.round(100*e)+"%",e<.98?r.classList.add("err"):r.classList.remove("err")}}}).catch(w):w("Not supported on your browser!"),s.addEventListener("submit",function(e){e.preventDefault();let t=f.value,n=new Uint8Array(l);for(let e=0,r=0;e<t.length&&r<n.length;e++){let o=a.indexOf(t[e]);-1!==o&&(n[r]=o,r++)}y.send(n),h(n,"tx")}),f.setAttribute("maxlength",l),_(),f.addEventListener("input",_)},function(e,t,n){"use strict";n.d(t,"i",function(){return o}),n.d(t,"a",function(){return w}),n.d(t,"g",function(){return _}),n.d(t,"c",function(){return v}),n.d(t,"f",function(){return A}),n.d(t,"d",function(){return x}),n.d(t,"b",function(){return S}),n.d(t,"e",function(){return C}),n.d(t,"h",function(){return T});var r=n(3);function o(){r.f()}const c=new Array(32);c.fill(void 0),c.push(void 0,null,!0,!1);let i=c.length;function u(e){i===c.length&&c.push(c.length+1);const t=i;return i=c[t],c[t]=e,t}let l=null;function a(){return null!==l&&l.buffer===r.g.buffer||(l=new Uint8Array(r.g.buffer)),l}let s=0;let f=null;function d(){return null!==f&&f.buffer===r.g.buffer||(f=new Int32Array(r.g.buffer)),f}let g=new TextDecoder("utf-8");function p(e,t){return g.decode(a().subarray(e,e+t))}function h(e){return c[e]}function m(e){const t=h(e);return function(e){e<36||(c[e]=i,i=e)}(e),t}let b,y=new TextEncoder("utf-8");b="function"==typeof y.encodeInto?function(e){let t=e.length,n=r.d(t),o=0;{const t=a();for(;o<e.length;o++){const r=e.charCodeAt(o);if(r>127)break;t[n+o]=r}}if(o!==e.length){e=e.slice(o),n=r.e(n,t,t=o+3*e.length);const c=a().subarray(n+o,n+t);o+=y.encodeInto(e,c).written}return s=o,n}:function(e){let t=e.length,n=r.d(t),o=0;{const t=a();for(;o<e.length;o++){const r=e.charCodeAt(o);if(r>127)break;t[n+o]=r}}if(o!==e.length){const c=y.encode(e.slice(o));n=r.e(n,t,t=o+c.length),a().set(c,n+o),o+=c.length}return s=o,n};class w{static __wrap(e){const t=Object.create(w.prototype);return t.ptr=e,t}free(){const e=this.ptr;this.ptr=0,r.a(e)}static new(e,t,n){const o=r.m(e,u(t),u(n));return w.__wrap(o)}send(e){r.o(this.ptr,function(e){const t=r.d(1*e.length);return a().set(e,t/1),s=e.length,t}(e),s)}push_sample(e){r.n(this.ptr,e)}static get_payload_len(){return r.j()>>>0}static get_beep_len(){return r.i()}static get_attack_len(){return r.h()}static get_symbol_mnemonics(){r.l(8);const e=d(),t=p(e[2],e[3]).slice();return r.c(e[2],1*e[3]),t}static get_release_len(){return r.k()}}const _=function(e){m(e)},v=function(){return u(new Array)},A=function(e){return u(e)},x=function(e,t){return h(e).push(h(t))},S=function(e,t,n){try{return u(h(e).call(h(t),h(n)))}catch(e){!function(e){r.b(u(e))}(e)}},C=function(e,t){const n=function e(t){const n=typeof t;if("number"==n||"boolean"==n||null==t)return`${t}`;if("string"==n)return`"${t}"`;if("symbol"==n){const e=t.description;return null==e?"Symbol":`Symbol(${e})`}if("function"==n){const e=t.name;return"string"==typeof e&&e.length>0?`Function(${e})`:"Function"}if(Array.isArray(t)){const n=t.length;let r="[";n>0&&(r+=e(t[0]));for(let o=1;o<n;o++)r+=", "+e(t[o]);return r+="]"}const r=/\[object ([^\]]+)\]/.exec(toString.call(t));let o;if(!(r.length>1))return toString.call(t);if("Object"==(o=r[1]))try{return"Object("+JSON.stringify(t)+")"}catch(e){return"Object"}return t instanceof Error?`${t.name}: ${t.message}\n${t.stack}`:o}(h(t)),r=b(n),o=s;d()[e/4+0]=r,d()[e/4+1]=o},T=function(e,t){throw new Error(p(e,t))}},function(e,t,n){"use strict";var r=n.w[e.i];e.exports=r;n(2);r.p()}]]);